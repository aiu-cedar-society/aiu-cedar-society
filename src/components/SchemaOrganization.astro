---
/**
 * SchemaOrganizationコンポーネント
 *
 * このコンポーネントは組織の構造化データ（JSON-LD形式）を生成します。
 * Googleが組織情報を理解し、検索結果にナレッジパネルを表示するために使用されます。
 *
 * @description
 * 組織の構造化データを提供することで、Googleは以下の情報を検索結果に表示できます：
 * - 組織名
 * - ロゴ
 * - 所在地
 * - SNSリンク
 *
 * 参考: https://schema.org/Organization
 *
 * @example
 * <!-- Layout.astroの<head>内で使用 -->
 * <SchemaOrganization />
 */

import { siteConfig, organizationConfig, seoConfig } from "../site.config";

// サイト情報を共通設定から取得
const siteUrl = Astro.site || siteConfig.url;
const siteName = siteConfig.name;

/**
 * Organization構造化データ
 *
 * @property @context - Schema.orgの名前空間
 * @property @type - データタイプ（Organization）
 * @property name - 組織名
 * @property url - 公式サイトURL
 * @property logo - ロゴ画像情報
 * @property description - 組織の説明
 * @property address - 所在地
 * @property foundingDate - 設立日
 * @property sameAs - SNSなどの関連リンク
 */
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  name: siteName,
  url: siteUrl,
  // ロゴ画像
  logo: {
    "@type": "ImageObject",
    url: `${siteUrl}${organizationConfig.logo.path}`,
    width: organizationConfig.logo.width,
    height: organizationConfig.logo.height,
  },
  // 組織の説明（日本語）
  description:
    seoConfig.defaultTitle.ja.split(" - ")[1] ||
    "秋田とAIU生の可能性をつなぐ学生主導の公認団体",
  // 所在地
  address: {
    "@type": "PostalAddress",
    addressLocality: organizationConfig.address.locality,
    addressRegion: organizationConfig.address.region,
    addressCountry: organizationConfig.address.country,
  },
  // 設立日（YYYY-MM形式）
  foundingDate: organizationConfig.foundingDate,
  // SNSなどの関連リンク（GoogleがSNSとの関連を認識する）
  sameAs: organizationConfig.socialLinks,
};
---

<!-- 
  組織の構造化データ（JSON-LD形式）
  
  is:inline: Astroのビルド最適化をスキップして、そのまま出力
  set:html: JSON文字列をHTMLとして挿入
-->
<script
  type="application/ld+json"
  is:inline
  set:html={JSON.stringify(organizationSchema)}
/>
